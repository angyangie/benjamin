<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Lemmen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
    .incomeLine {
      fill:none;
      stroke:green;
      stroke-width:2px;
    }
    .expenseLine {
      fill:none;
      stroke:red;
      stroke-width:2px;
    }
    path.domain {
      fill:none;
      stroke:#333;
      stroke-width:2px;
    }

    .grid .tick {
      stroke: lightgrey;
      opacity: 0.7;
    }
    .grid path {
      stroke-width: 0;
    }
    div.2015 {
      display:none;
    }
    </style>
</head>

<body class="off-canvas">
    <div id="container">
        
            <%= render template: "layouts/_header" %>

            <%= render template: "layouts/_sidebar" %>

            <!--main content start-->
            <section class="main-content-wrapper">
            <section id="main-content">

            <%= render template: "layouts/_tiles_top" %>
               
                <!--charts space start -->
                <div class="row">
                  <div class="col-md-9" id="line-graph">
                  </div>
                  <div class="col-md-3" id="pie-chart">
                    <svg id="pie-chart-svg">
                    </svg>
                  </div>
                </div>
                <!--charts end -->

                <!--dashboard charts and income statementstart-->
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div>
                                <%= link_to "Update All Accounts", {controller: "plaidapi", action: "update_accounts"}, method: "patch" %>
                            </div>
                                <%= render "income_statement_divs" %>
                            <div>
                            <!-- Button trigger modal -->
                                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#budetModel">
                                  + Add a budget
                                </button>

                            <!-- Modal -->
                                <div class="modal fade" id="budetModel" tabindex="-1" role="dialog" aria-labelledby="budetModelLabel">
                                  <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-budget" id="add-budget">Budget</h4>
                                        <p>Add a monthly budget amount and select a category</p>
                                      </div>
                                      <div class="modal-body">
                                        <%= form_for Budget.new do |f| %>
                                          <%= f.label :amount %>
                                          <%= f.text_field :amount, placeholder: '$0' %>

                                          <%= f.label :category %>
                                          <%= f.collection_select :category_id, Category.all, :id, :name, prompt: true %>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        <%= f.submit "Save Budget", class: 'btn btn-success', controller: 'budgets', action: 'create', remote: true %>
                                        <% end %>
                                      </div>
                                    </div>
                                  </div>
                                </div> 
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-body">
                                  
                        </div>
                    </div>
                </div>

            </section>
        </section>
    </div>
    <!--main content end-->

    <!--Global JS-->
    <!-- <script src="assets/js/jquery-1.10.2.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/application.js"></script>
    <script src="assets/plugins/navgoco/jquery.navgoco.min.js"></script>
    <script src="assets/plugins/waypoints/waypoints.min.js"></script> -->

    <!--Page Level JS-->
    <!-- <script src="assets/plugins/countTo/jquery.countTo.js"></script>
    <script type="text/javascript" src="income_statement.js"></script> -->

<script>
  $(document).ready(function() {
    $.ajax ({
      url: '/users/linegraph',
      method: 'post'
    }).done(console.log("done"))
  })
</script>

</body>

</html>
